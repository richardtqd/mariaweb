<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html" 
                xmlns:p="http://primefaces.org/ui"       
                xmlns:webuijsf="http://www.sun.com/webui/webuijsf"
                template="/plantilla/plantillaPrincipal.xhtml" 
                xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:define name="content">

        <h:body> 
            <h:panelGrid columns="1" style="margin: 0 auto;" >
                <h:form id="frmEDGraficos">
                    <script type="text/javascript" src="../resources/js/jquery.jqplot.js"></script>
                    <script type="text/javascript" src="../resources/js/jqplot.barRenderer.js"></script>
                    <script type="text/javascript" src="../resources/js/jqplot.categoryAxisRenderer.js"></script>
                    <script type="text/javascript" src="../resources/js/jqplot.pieRenderer.js"></script>
                    <script type="text/javascript" src="../resources/js/jqplot.pointLabelsEva.js"></script>
                    <script type="text/javascript" src="../resources/js/jqplot.highlighter.js"></script>
                    <script type="text/javascript" src="../resources/js/jqplot.blockRenderer.js"></script>
                    <script type="text/javascript" src="../resources/js/jqplot.enhancedLegendRenderer.js"></script>                
                    <script type="text/javascript" src="../resources/js/jqplot.enhancedPieLegendRenderer.js"></script>                

                    <link rel="stylesheet" type="text/css" href="../resources/css/chartStyle.css" />                  

                    <p:panel id="pnl_combo1" header="#{msgs.etiquetaEvaluacionDesempeno}" style="margin-bottom:10px;">
                        <table id="tbl_combo1" align="center">
                            <tr>
                                <td align="center">
                                    <br/><br/>
                                    <h:panelGrid columns="7">
                                        <p:outputLabel value="Obra Marista :" />
                                        <p:selectOneMenu value="#{evaluacionDesempenoMB.uniNegHis}" style="width: 250px;">
                                            <f:selectItems value="#{evaluacionDesempenoMB.listaUniNegHistorico}" var="uniNegHis" itemValue="#{uniNegHis.uniNeg}" itemLabel="#{uniNegHis.nombreUniNeg}" />
                                        </p:selectOneMenu>   
                                    </h:panelGrid>
                                </td>
                                <td>&nbsp;&nbsp;</td>
                                <td>
                                    <br/><br/>
                                    <p:commandButton value="#{msgs.botonBuscar}" icon="fa fa-fw fa-search" actionListener="#{evaluacionDesempenoMB.cargarGraficos(evaluacionDesempenoMB.uniNegHis)}" 
                                                     update=":frmEDGraficos:frmGraficos_report, :frmEDGraficos:td_flgimprimir"/>                                                                                    
                                </td>
                                <td >
                                    <br/><br/>
                                    &nbsp;&nbsp;&nbsp;
                                    <p:commandButton value="Consolidado Directores" icon="ui-icon-calculator" actionListener="#{evaluacionDesempenoMB.cargarGraficosColegios()}" 
                                                     update=":frmEDGraficos:frmGraficos_report, :frmEDGraficos:td_flgimprimir"/>                                                                                                                        
                                </td>
                                <td>
                                    <br/><br/>
                                    <p:panel id="td_flgimprimir" style="border: 0px;margin-bottom:0px;">
                                        <p:commandButton rendered="#{evaluacionDesempenoMB.flgimprimir == 0 ? true:false}" id="printButton9" style="font-weight: bold;" value="Imprimir"  icon="ui-icon-print" onclick="imprimirGraficos()"/>
                                        <p:commandButton rendered="#{evaluacionDesempenoMB.flgimprimir == 1 ? true:false}" id="printButton10" style="font-weight: bold;" value="Imprimir"  icon="ui-icon-print" onclick="imprimirGraficosCons()"/>
                                    </p:panel>
                                </td>                                
                            </tr>
                        </table> 
                        <br/> <br/> <br/>
                        <p:panel id="frmGraficos_report" style="border: 0px;">


                            <p:panel id="grf_1"
                                     rendered="#{!empty evaluacionDesempenoMB.listaResDirectores ?  true : false}"
                                     style="margin-bottom:10px;">
                                <table align="center">
                                    <tr>
                                        <td align="center">
                                            <h:panelGrid>
                                                <p:chart  type="bar" model="#{evaluacionDesempenoMB.horiResDirectivos}" style="text-align:center;width:900px;height:500px" />
                                            </h:panelGrid> 
                                        </td>
                                    </tr>
                                </table>                                                                             
                            </p:panel>                                   
                            <p:panel id="grf_3" 
                                     rendered="#{!empty evaluacionDesempenoMB.listaResDirectoresHis ?  true : false}"                                     
                                     style="margin-bottom:10px;">
                                <table align="center">
                                    <tr>
                                        <td align="center">
                                            <h:panelGrid>
                                                <p:chart  type="bar" model="#{evaluacionDesempenoMB.horiResDirectivosPromActual}" style="text-align:center;width:900px;height:500px" />
                                            </h:panelGrid> 
                                        </td>
                                    </tr>
                                </table>                                                                             
                            </p:panel>  
                            <p:panel id="grf_2" 
                                     rendered="#{!empty evaluacionDesempenoMB.listaResDirectoresProm and evaluacionDesempenoMB.uniNegHis!='SECTOR' ?  true : false}"
                                     style="margin-bottom:10px;">
                                <table align="center">
                                    <tr>
                                        <td align="center">
                                            <h:panelGrid>
                                                <br/>
                                                <p:chart  type="bar" model="#{evaluacionDesempenoMB.horiResDirectivosProm}" style="text-align:center;width:900px;height:600px" />
                                            </h:panelGrid> 
                                        </td>
                                    </tr>
                                </table>                                                                             
                            </p:panel>                                      


                            <p:panel id="grf_4" 
                                     rendered="#{!empty evaluacionDesempenoMB.listaDirectoresED ?  true : false}"                                     
                                     style="margin-bottom:10px;">
                                <table align="center">
                                    <tr>
                                        <td align="center">
                                            <h:panelGrid>
                                                <p:chart  type="bar" model="#{evaluacionDesempenoMB.horiResDirectoresED}" style="text-align:center;width:900px;height:600px" />
                                            </h:panelGrid>
                                        </td>
                                    </tr>
                                </table>                                                                             
                            </p:panel>
                            <p:panel id="grf_5" 
                                     rendered="#{!empty evaluacionDesempenoMB.listaResDirectoresPromHis ?  true : false}"                                     
                                     style="margin-bottom:10px;">
                                <table align="center">
                                    <tr>
                                        <td align="center">
                                            <h:panelGrid>
                                                <p:chart  type="bar" model="#{evaluacionDesempenoMB.horiResDirectoresProm}" style="text-align:center;width:900px;height:600px" />
                                            </h:panelGrid>
                                        </td>
                                    </tr>
                                </table>                                                                             
                            </p:panel>                            
                        </p:panel>                                                                
                    </p:panel>
                </h:form>  
            </h:panelGrid>


            <script type="text/javascript">

                function imprimirGraficos() {
                    window.open("mantPrintGrafDirectivos.xhtml");
                }
                function imprimirGraficosCons() {
                    window.open("mantPrintGrafDirectivosCons.xhtml");
                }

                function pieExtender() {
                    this.cfg.highlighter = {
                        show: true,
                        tooltipLocation: 'n',
                        useAxesFormatters: false,
                        formatString: '%s = %d'
                    };
                }
                function chartBarSatisfaccionExtender() {
                    this.cfg.seriesDefaults.rendererOptions.barWidth = 60;

                    this.cfg.highlighter = {
                        show: true,
                        tooltiplocation: 'ne',
                        useAxesFormatters: true,
                        formatString: "<div><span>Nro: %s </span><br/><span>Porcentaje: %#.2f% </span></div>"
                    };
                }
                function chartBarExtender() {
                    // this.cfg.seriesDefaults.rendererOptions.barWidth=60;
                    this.cfg.highlighter = {
                        show: true,
                        tooltiplocation: 'ne',
                        useAxesFormatters: true,
                        formatString: "<div><span>Nro: %s </span><br/><span>Porcentaje: %#.2f% </span></div>"
                    };

                }
                function chartBarHistoricoExtender() {
                    this.cfg.seriesDefaults.rendererOptions.barWidth = 60;
                    this.cfg.highlighter = {
                        show: true,
                        tooltiplocation: 'ne',
                        useAxesFormatters: false,
                        formatString: "<div><span>Nro: %s </span><br/><span>Porcentaje: %#.2f% </span></div>"
                    };
                }
                function chartHorizontalExtender() {
                    this.cfg.seriesDefaults.rendererOptions.barWidth = 30;
                    this.cfg.highlighter = {
                        show: true,
                        tooltiplocation: 'ne',
                        useAxesFormatters: false,
                        formatString: "<div><span>Porcentaje: %s% </span><br/><span>Nro: %d </span></div>"
                    };
                }
                function chartHorizontalExtender1() {
                    this.cfg.seriesDefaults.rendererOptions.barWidth = 10;
                    this.cfg.highlighter = {
                        show: true,
                        tooltiplocation: 'ne',
                        useAxesFormatters: false,
                        formatString: "<div><span>Porcentaje: %s% </span><br/><span>Nro: %d </span></div>"
                    };
                }
                function chartVerticalExtender() {
                    this.cfg.seriesDefaults.rendererOptions.barWidth = 50;
                    this.cfg.seriesDefaults.markerOptions = {
                        show: true,
                        style: 'circle',
                        lineWidth: 2,
                        size: 9,
                        color: '#666666',
                        shadow: true,
                        shadowAngle: 45,
                        shadowOffset: 1,
                        shadowDepth: 3,
                        shadowAlpha: 0.07

                    };
                    //this.cfg.seriesDefaults.rendererOptions.EPSILON = 215;
                    this.cfg.highlighter = {
                        show: true,
                        tooltiplocation: 'ne',
                        useAxesFormatters: false,
                        formatString: "<div><span>Nro: %d</span><br/><span>Porcentaje: %s% </span></div>" //datos que se muestran en el tooltip del grafico
                    };
                }
                function extLegend()
                {

                    this.cfg.grid = {
                        drawBorder: false, // Quita borde de Grafico
                        background: 'rgba(255, 255, 255, .0)', //Color de Fondo del Grafico
                        shadow: false
                    };
                    this.cfg.legend = {
                        renderer: $.jqplot.EnhancedPieLegendRenderer,
                        show: true,
                        location: 's', // centrado debajo del grafico
                        marginTop: '15px', //margen de la legenda
                        labels: {boxWidth: 80, fontColor: 'white'},
                        //background: 'rgba(255, 255, 255, .0)',
                        rendererOptions: {numberRows: 1} // legenda en forma horizontal

                    };
                    ///  borde del grafio de pie
                    this.cfg.seriesDefaults = {
                        renderer: $.jqplot.PieRenderer,
                        //shadow: false,
                        lineWidth: 1,
                        markerOptions: {
                            show: true, // wether to show data point markers.
                            style: 'square', // circle, diamond, square, filledCircle.
                            // filledDiamond or filledSquare.
                            lineWidth: 2, // width of the stroke drawing the marker.
                            size: 9, // size (diameter, edge length, etc.) of the marker.
                            color: '#666666', // color of marker, set to color of line by default.
                            shadow: true, // wether to draw shadow on marker or not.
                            shadowAngle: 45, // angle of the shadow.  Clockwise from x axis.
                            shadowOffset: 1, // offset from the line of the shadow,
                            shadowDepth: 3, // Number of strokes to make when drawing shadow.  Each stroke
                            // offset by shadowOffset from the last.
                            shadowAlpha: 5   // Opacity of the shadow
                        }
                    };
                    this.cfg.seriesDefaults.rendererOptions = {
                        showDataLabels: true
                    };
                    ///


                }
            </script>

        </h:body>
    </ui:define>
</ui:composition>
